(self.webpackChunkangular_lista_planos=self.webpackChunkangular_lista_planos||[]).push([[437],{437:(a,t,r)=>{"use strict";r.r(t),r.d(t,{PlanosModule:()=>w});var o=r(1116),s=r(2593),l=r(8604),e=r(6985),n=r(8619),i=r(2693),u=r(9996);class c{constructor(a,t,r,o,s){this.sku=a,this.franquia=t,this.valor=r,this.ativo=o,this.aparelho=s}}var p=r(529);let h=(()=>{class a{constructor(a){this.httpClient=a}obterPlanosParaPlataforma(a){const t=new i.WM({"cache-response":"true"});return this.httpClient.get(`${p.N.apiUrl}/planos/${a}`,{headers:t}).pipe((0,u.U)(a=>a.planos.map(a=>new c(a.sku,a.franquia,a.valor,a.ativo,a.aparelho))))}}return a.\u0275fac=function(t){return new(t||a)(n.LFG(i.eN))},a.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var f=r(485),v=r(5739),m=r(2568);function d(a,t){if(1&a){const a=n.EpF();n.TgZ(0,"div",5),n.TgZ(1,"app-card",6),n.NdJ("click",function(){const t=n.CHM(a).$implicit;return n.oxw().selecionarPlano(t)}),n.qZA(),n.qZA()}if(2&a){const a=t.$implicit;n.ekj("inativo",!a.ativo),n.xp6(1),n.MGl("subtitle","R$ ",a.valor,""),n.hYB("subtitle3","",null==a.aparelho?null:a.aparelho.numeroParcelas,"x de R$ ",(null==a.aparelho?null:a.aparelho.valorParcela)||(null==a.aparelho?null:a.aparelho.valor),""),n.MGl("subtitle4","ou R$ ",null==a.aparelho?null:a.aparelho.valor," a vista"),n.Q6J("title",a.franquia)("subtitle2",null==a.aparelho?null:a.aparelho.nome)}}let g=(()=>{class a{constructor(a,t,r,o){this.planosService=a,this.route=t,this.router=r,this.store=o,this.planos=[],this.plataformaSku="",this.subs=new e.Y}ngOnInit(){this.carregarSkuPlataforma()}carregarSkuPlataforma(){this.plataformaSku=this.route.snapshot.params.plataformaSku,this.carregarPlanos()}carregarPlanos(){this.subs.sink=this.planosService.obterPlanosParaPlataforma(this.plataformaSku).subscribe({next:a=>{this.planos=a},error:()=>{throw new Error("Algo deu errado ao carregar os planos")}})}selecionarPlano(a){if(!a.ativo)throw new Error("Plano inativo");this.store.dispatch(new l.K(a)),this.router.navigate(["dados",this.plataformaSku,a.sku])}ngOnDestroy(){this.subs.unsubscribe()}}return a.\u0275fac=function(t){return new(t||a)(n.Y36(h),n.Y36(s.gz),n.Y36(s.F0),n.Y36(f.yh))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-planos"]],decls:6,vars:1,consts:[["title","Planos","prevRoute","/plataformas"],[1,"container"],[1,"title"],[1,"grid"],["class","col-12 md:col-4",3,"inativo",4,"ngFor","ngForOf"],[1,"col-12","md:col-4"],[3,"title","subtitle","subtitle2","subtitle3","subtitle4","click"]],template:function(a,t){1&a&&(n._UZ(0,"app-topbar",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n._uU(3,"Planos dispon\xedveis"),n.qZA(),n.TgZ(4,"div",3),n.YNc(5,d,2,8,"div",4),n.qZA(),n.qZA()),2&a&&(n.xp6(5),n.Q6J("ngForOf",t.planos))},directives:[v.o,o.sg,m.A],styles:[""]}),a})();const b=[{path:"",component:g},{path:":plataformaSku",component:g}];let k=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[s.Bz.forChild(b)],s.Bz]}),a})();var P=r(5425);let w=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=n.oAB({type:a}),a.\u0275inj=n.cJS({imports:[[o.ez,k,P.m]]}),a})()}}]);